<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>CH559 Programming (Part 3): Memory Organization - Kali Prasad</title><meta name=Description content="CH559 Programming (Part 3): Memory Organization - Kali Prasad"><link rel=icon type=image/png href=/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="CH559 Programming (Part 3): Memory Organization"><meta property="og:description" content="Bare Metal programming with CH559"><meta property="og:type" content="article"><meta property="og:url" content="https://kprasadvnsi.com/posts/bare-metal-ch559-pt3/"><meta property="og:image" content="https://kprasadvnsi.com/mem_struct.jpg"><meta property="article:published_time" content="2020-03-30T00:00:00+00:00"><meta property="article:modified_time" content="2020-03-30T00:00:00+00:00"><meta property="og:site_name" content="Kali Prasad"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kprasadvnsi.com/mem_struct.jpg"><meta name=twitter:title content="CH559 Programming (Part 3): Memory Organization"><meta name=twitter:description content="Bare Metal programming with CH559"><meta name=twitter:site content="@kprasadvnsi"><meta name=twitter:creator content="@kprasadvnsi"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"CH559 Programming (Part 3): Memory Organization","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kprasadvnsi.com\/posts\/bare-metal-ch559-pt3\/"},"image":{"@type":"ImageObject","url":"https:\/\/kprasadvnsi.com\/mem_struct.jpg","width":800,"height":666},"genre":"posts","keywords":"Bare Metal, CH559, 8051, MCS-51","wordcount":469,"url":"https:\/\/kprasadvnsi.com\/posts\/bare-metal-ch559-pt3\/","datePublished":"2020-03-30T00:00:00","dateModified":"2020-03-30T00:00:00","license":"© 2020 Kali Prasad","publisher":{"@type":"Organization","name":"Kali Prasad","logo":{"@type":"ImageObject","url":"https:\/\/kprasadvnsi.com\/avatar.png","width":80,"height":80}},"author":{"@type":"Person","name":"Kali Prasad"},"description":"Bare Metal programming with CH559"}</script><link rel=preload href=https://kprasadvnsi.com/css/bundle.min.7ceb6505cb87d0614f44be28b935ac372beb44497009528d82e25ed4360ef407.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet type=text/css media=screen href=https://kprasadvnsi.com/css/bundle.min.7ceb6505cb87d0614f44be28b935ac372beb44497009528d82e25ed4360ef407.css></noscript><script data-ad-client=ca-pub-6490269775913302 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){};}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload");}catch(e){ret=false;}
return function(){return ret;};})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){if(link.addEventListener){link.removeEventListener("load",enableStylesheet);}else if(link.attachEvent){link.detachEvent("onload",enableStylesheet);}
link.setAttribute("onload",null);link.media=finalMedia;}
if(link.addEventListener){link.addEventListener("load",enableStylesheet);}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet);}
setTimeout(function(){link.rel="stylesheet";link.media="only x";});setTimeout(enableStylesheet,3000);};rp.poly=function(){if(rp.support()){return;}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",true);rp.bindMediaToggle(link);}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run);});}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run);});}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS;}
else{w.loadCSS=loadCSS;}}(typeof global!=="undefined"?global:this));</script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://kprasadvnsi.com/><picture>
<source type=image/webp srcset=/avatar.webp><img src=/avatar.png alt="Kali Prasad"></picture></a></div><p class=site-title><a href=https://kprasadvnsi.com/>Kali Prasad</a></p><div class=site-description><p>Random blog</p><nav class="nav social"><ul class=flat><li class=li-social><a href=https://twitter.com/kprasadvnsi><i title=Twitter class="icons fab fa-twitter"></i></a></li><li class=li-social><a href=https://mastodon.social/@kprasadvnsi><i title=Mastodon class="icons fab fa-mastodon"></i></a></li><li class=li-social><a href=https://t.me/kprasadvnsi><i title=Telegram class="icons fab fa-telegram"></i></a></li><li class=li-social><a href=https://github.com/kprasadvnsi><i title=Github class="icons fab fa-github"></i></a></li><li class=li-social><a href=https://www.youtube.com/channel/UCJYk1lszl4uCf-kcCu27Ogw><i title=Youtube class="icons fab fa-youtube"></i></a></li><li class=li-social><a href=mailto:kprasadvnsi@protonmail.com><i title=Email class="icons fas fa-at"></i></a></li><li class=li-social><a href=/index.xml><i title=RSS class="icons fas fa-rss"></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>30</span>
<span class=rest>Mar 2020</span></div></div><div class=matter><h1 class=title>CH559 Programming (Part 3): Memory Organization</h1></div></div><div class=markdown><p>In this part, we are going to learn about the CH559 memory structure and how the various part of memory will be accessed. The CH559 is an 8051 based microcontroller so the basic methods of accessing memory are also applicable here.</p><p>The CH559 has four distinct types of memory – iRAM (internal RAM), SFR (special function registers), ROM (program memory), and xRAM (external data memory).</p><p><img src=/mem_struct.jpg alt="Memory Organization"></p><h2 id=internal-ram>Internal RAM</h2><p>Internal RAM (iRAM) has an 8-bit address space, using addresses 0x00 through 0xFF. iRAM from 0x00 to 0x7F can be accessed directly, using an 8-bit absolute address that is part of the instruction. Alternatively, iRAM can be accessed indirectly.</p><p>The original 8051 has only 128 bytes of iRAM. The 8052 added iRAM from 0x80 to 0xFF, which can only be accessed indirectly. Direct access to this address range goes to the special function registers. CH559 has a full 256 bytes of iRAM.</p><p>Memory addresses from 0x00 to 0x7F are divided into working registers (organized as register banks), Bit-addressable area and general-purpose RAM. Memory addresses 0x00 to 0x1F consists of 32 working registers that are organized as four banks with 8 registers in each bank. The 16 bytes (128 bits) at iRAM locations 0x20–0x2F are bit-addressable.</p><h2 id=special-function-registers>Special function registers</h2><p>Special function registers (SFR) are located in the same address space as iRAM, at addresses 0x80 to 0xFF, and are accessed directly using the same instructions as for the lower half of iRAM. They cannot be accessed indirectly. 16 of the SFRs (those whose addresses are multiples of 8) are also bit-addressable.</p><h2 id=program-memory>Program memory</h2><p>Program memory (ROM) is up to 64 KB of read-only memory, starting at address 0x0000 in a separate address space. It may be on- or off-chip, depending on the particular model of the chip being used.</p><p>CH559 has on-chip 64 KB of flash-based ROM and can be divided into 60 KB program storage and 1 KB data storage area and 3 KB boot code BootLoader/ISP program area.</p><h2 id=external-data-memory>External data memory</h2><p>External data memory (xRAM) is a third address space, also starting at address 0, and allowing 16 bits of address space. It can also be on- or off-chip. what makes it &ldquo;external&rdquo; is that it must be accessed using the MOVX (move external) instruction. Many variants of the 8051 include the standard 256 bytes of iRAM plus a few KB of XRAM on the chip.</p><p>CH559 has 6 KB on-chip xRAM that can be used for large temporary data storage and DMA direct memory access. support for the external expansion of 32 KB external SRAM.</p><p>The external data storage space is 64 KB in total, as shown in Figure above, and partially used for 6 KB on-chip expansion of xRAM and xSFR. Except for the two reserved areas, the remaining 0x4000 to 0xFFFF address range is the external bus area.</p></div><div class=tags><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=/tags/8051/>8051</a>
<a href=/tags/bare-metal/>bare-metal</a>
<a href=/tags/ch559/>ch559</a>
<a href=/tags/mcs-51/>mcs-51</a></p></div><div class=clearit></div></div></div></div><div class="footer wrapper"><nav class=nav><div class=footertext>© 2020 Kali Prasad</div></nav></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-161815915-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>